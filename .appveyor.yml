image:
  - Visual Studio 2017
configuration:
  - Release
  - Debug
cache:
  - C:\projects\glfw
  - C:\projects\glbinding
  - C:\projects\glm
install:
  - git clone --depth 1 https://github.com/glfw/glfw.git C:\projects\glfw
  - cd C:\projects\glfw
  - git fetch --depth 1 --tags
  - git checkout 3.2.1
  - mkdir ../build-glfw && cd ../build-glfw
  - cmake \
    -DCMAKE_INSTALL_PREFIX=C:\deps\glfw \
    -G "Visual Studio 15 2017 Win64" \
    ../glfw
  - cmake --build .

  - git clone --depth 1 https://github.com/g-truc/glm.git C:\projects\glm
  - cd C:\projects\glm
  - git fetch --depth 1 --tags
  - git checkout 0.9.9.0

  - git clone --depth 1 https://github.com/cginternals/glbinding C:\projects\glbinding
  - cd C:\projects\glbinding
  - git fetch --depth 1 --tags
  - git checkout v2.1.4
  - mkdir ../build-glbinding && cd ../build-glbinding
  - cmake \
    -DCMAKE_CXX_FLAGS=/D_SILENCE_TR1_NAMESPACE_DEPRECATION_WARNING \
    -DCMAKE_INSTALL_PREFIX=C:\deps\glbinding \
    -G "Visual Studio 15 2017 Win64" \
    ../glbinding
  - cmake --build .
before_build:
  - cmd: |
      mkdir build
      cd build
      cmake --version
      cmake .. -Dglfw3_DIR=C:\deps\glfw -G "Visual Studio 15 2017 Win64"
build:
  project: build\SwarmMind.sln
#  verbosity: minimal
  parallel: true
artifacts:
  - path: build
    name: Build output
    type: zip
